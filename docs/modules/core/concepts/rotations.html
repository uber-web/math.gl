<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-modules/core/concepts/rotations">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">3D Rotations | math.gl</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://math.gl/math.gl/docs/modules/core/concepts/rotations"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3D Rotations | math.gl"><meta data-rh="true" name="description" content="This article is a work in progress."><meta data-rh="true" property="og:description" content="This article is a work in progress."><link data-rh="true" rel="icon" href="/math.gl/favicon.png"><link data-rh="true" rel="canonical" href="https://math.gl/math.gl/docs/modules/core/concepts/rotations"><link data-rh="true" rel="alternate" href="https://math.gl/math.gl/docs/modules/core/concepts/rotations" hreflang="en"><link data-rh="true" rel="alternate" href="https://math.gl/math.gl/docs/modules/core/concepts/rotations" hreflang="x-default"><link rel="stylesheet" href="/math.gl/assets/css/styles.1a9ab52c.css">
<link rel="preload" href="/math.gl/assets/js/runtime~main.60ec85c9.js" as="script">
<link rel="preload" href="/math.gl/assets/js/main.ef2f5c7e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/math.gl/"><div class="navbar__logo"><img src="/math.gl/images/visgl-logo-dark.png" alt="vis.gl Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/math.gl/images/visgl-logo-dark.png" alt="vis.gl Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">math.gl</b></a><a class="navbar__item navbar__link" href="/math.gl/examples">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/math.gl/docs">Docs</a><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/math.gl/docs">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/math.gl/docs/developer-guide/get-started">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/math.gl/docs/modules/types">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/math.gl/docs/modules/core/concepts/homogeneous-coordinates">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math.gl/docs/modules/core/concepts/homogeneous-coordinates">Homogeneous Coordinates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math.gl/docs/modules/core/concepts/coordinate-systems">3D Coordinate Systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/math.gl/docs/modules/core/concepts/rotations">3D Rotations</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/math.gl/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3D Rotations</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>3D Rotations</h1><blockquote><p>This article is a work in progress.</p></blockquote><p>math.gl provides a &quot;standard 3D library complement&quot; of mathematical classes for handling rotations in 2D and 3D, such as classes for manipulating <code>Euler</code> angles and <code>Quaternion</code>s. As in any 3D math library, the key goals are enabling applications to easily and intuitively specify (parametrize) rotations, combine them with other rotations and other transformations, and ultimately transform points with the rotations or resulting transformations.</p><p>While math.gl is intended to help programmers&#x27; implement the typical 3D application&#x27;s rotation functionality with a minimum amount of knowledge, and does not even attempt to support rotations in more than 3 dimensions, it should be pointed out that the mathematical treatment of rotations can be very complicated. For some context on this see the background section at the end of this article.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-of-3d-rotations">Properties of 3D Rotations<a href="#properties-of-3d-rotations" class="hash-link" aria-label="Direct link to Properties of 3D Rotations" title="Direct link to Properties of 3D Rotations">​</a></h3><ul><li>In contrast to 2D rotations, 3D rotations are not order-independent, meaning that applying the same two rotations in different order will often yield different results.</li><li>However, by <a href="https://en.wikipedia.org/wiki/Euler%27s_rotation_theorem" target="_blank" rel="noopener noreferrer">Euler&#x27;s Rotation Theorem</a>, two 3D rotations around the origin can always be expressed as (combined into) another single 3D rotation around the origin.</li><li>A 3D rotation requires a minimum of three values to be fully specified (and even then can require careful definitions of which conventions are used).</li></ul><p>Also, a simple observation: Rotations around arbitrary points can be treated as rotations around the origin simply by applying a translation before the rotation, and the inverse translation after the rotation. Therefore, for simplicity, this discussion focuses solely on rotations around the origin.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parametrizing-3d-rotations">Parametrizing 3D Rotations<a href="#parametrizing-3d-rotations" class="hash-link" aria-label="Direct link to Parametrizing 3D Rotations" title="Direct link to Parametrizing 3D Rotations">​</a></h2><p>A minimum of three values are required to fully specify a 3D rotation (another result of Euler&#x27;s), e.g, Euler angles or unit quaternions.</p><p>However in many cases the best way to specify a rotation is to use four parameters: an axis and an angle.</p><table><thead><tr><th>Representation</th><th>Interpolation</th><th>Addition</th><th>Transforming points</th></tr></thead><tbody><tr><td>Vector/Angle</td><td>-</td><td>-</td><td>Good</td></tr><tr><td>Quaternion</td><td>Excellent</td><td>Excellent</td><td>Good</td></tr><tr><td>4x4 Matrix</td><td>-</td><td>Excellent</td><td>Excellent</td></tr><tr><td>Euler angle</td><td>-</td><td>-</td><td>-</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotation-axis-and-angle">Rotation Axis and Angle<a href="#rotation-axis-and-angle" class="hash-link" aria-label="Direct link to Rotation Axis and Angle" title="Direct link to Rotation Axis and Angle">​</a></h3><p>Per the Euler Rotation Theorem, any two 3D rotations can be combined into a single 3D rotation. A single 3D rotation happens around an axis, and the rotation is a certain angle. This means that it is possible to specify a rotation using four very understanable values: an axis and an angle.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="euler-angles">Euler Angles<a href="#euler-angles" class="hash-link" aria-label="Direct link to Euler Angles" title="Direct link to Euler Angles">​</a></h3><p>One of the more &quot;human readable&quot; representation of a 3D rotation is the &quot;Euler angle&quot;, simplistically, an &quot;Euler angle&quot; completely specifies a rotation using only 3 values, which are all &quot;human readable&quot; angles around the three coordinate axes, which is very appealing.</p><p>However, the conventions for <a href="https://en.wikipedia.org/wiki/Euler_angles" target="_blank" rel="noopener noreferrer">Euler angle values</a> can vary in a number of ways. Following three.js, the math.gl <code>Euler</code> class uses intrinsic Tait-Bryan angles.</p><p>Note that the large number of representations means that Euler angles exchanged between e.g. different software systems may not be directly compatible (and in addition, converting between the various representations is not exactly easy), so unless care is taken this can cause &quot;mind-numbing&quot; confusion.</p><p>Because of the variability, a good approach is often to be extremely careful when importing and exporting Euler angles from your code, and convert angle Euler angles to Matrix or Quaternion representations (which are much less ambiguous) for further manipulation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit-quaternions">Unit Quaternions<a href="#unit-quaternions" class="hash-link" aria-label="Direct link to Unit Quaternions" title="Direct link to Unit Quaternions">​</a></h3><p>&quot;Unit quaternions&quot; are normally the best representation for &quot;manipulation&quot; of 3D rotations. Manpulation here mainly refers to the &quot;composition&quot; or &quot;addition&quot; and interpolation of rotations.</p><p>Note that unit quaternions are simply quaternions of norm (or length) equal to <code>1</code>, and while a general quaternion (as the name suggests) contains four components, a unit quaternion needs only three values to be fully specified.</p><p>Unit quaternions can be used to model 3 dimensional rotations.</p><p>qr<em>v</em>qr-1</p><p>Interpolation of quaternions is done using Spherical Linear intERPolation (aka SLERP).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rotation-matrices">Rotation Matrices<a href="#rotation-matrices" class="hash-link" aria-label="Direct link to Rotation Matrices" title="Direct link to Rotation Matrices">​</a></h2><p>When combining rotations with other transformations (translations, scalings, projections etc), 4x4 matrices are the representation of choice.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="properties-of-rotation-matrices">Properties of Rotation Matrices<a href="#properties-of-rotation-matrices" class="hash-link" aria-label="Direct link to Properties of Rotation Matrices" title="Direct link to Properties of Rotation Matrices">​</a></h2><p>A rotation matrix</p><p>T
RR = I</p><p>Note that a matrix R satisfying this can also include an inversion (improper rotation matrix)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="converting-between-rotation-representations">Converting between Rotation Representations<a href="#converting-between-rotation-representations" class="hash-link" aria-label="Direct link to Converting between Rotation Representations" title="Direct link to Converting between Rotation Representations">​</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Euler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Euler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="executing-rotation-transformations">Executing Rotation Transformations<a href="#executing-rotation-transformations" class="hash-link" aria-label="Direct link to Executing Rotation Transformations" title="Direct link to Executing Rotation Transformations">​</a></h2><p>While Euler angles are often a good way to specify 3D rotations, they can not directly be used to transfor points or vectors. To do that, they have to be converted to .</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rotations-using-rotation-matrices">Rotations using Rotation Matrices<a href="#rotations-using-rotation-matrices" class="hash-link" aria-label="Direct link to Rotations using Rotation Matrices" title="Direct link to Rotations using Rotation Matrices">​</a></h2><p>A rotation matrix</p><p>T
RR = I</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="combining-rotations">Combining Rotations<a href="#combining-rotations" class="hash-link" aria-label="Direct link to Combining Rotations" title="Direct link to Combining Rotations">​</a></h2><p>The fact that rotations. They can either be combined as w</p><p>Math with Euler Angles</p><p>Math with Quaternions</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interpolating-rotations">Interpolating Rotations<a href="#interpolating-rotations" class="hash-link" aria-label="Direct link to Interpolating Rotations" title="Direct link to Interpolating Rotations">​</a></h2><p>To avoid issues with gimbal locks and flips, it is recommended to use quaternions when interpolating rotations.</p><p>Calculate the quaternion that represents the rotation you want to apply (e.g. moves the start rotation to the target rotation), and then just interpolate q with the identity quaternion using <code>slerp()</code>. The resulting quaternion can then be used directly to transform <code>Vector</code>s or it can be transformed into a <code>Matrix4</code> transformation matrix.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qUnit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Quaternion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qTarget </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Quaternion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> ratio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ratio </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ratio </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qInterpolated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Quaternion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slerp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">qUnit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qTarget</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ratio</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background-rotations-are-complicated">Background: Rotations are Complicated<a href="#background-rotations-are-complicated" class="hash-link" aria-label="Direct link to Background: Rotations are Complicated" title="Direct link to Background: Rotations are Complicated">​</a></h2><p>If you are new to working with rotations and the amount of complications outlined in this article seem overwhelming, take some comfort in the fact that rotations in three and higher dimensional spaces are indeed quite complicated to treat mathematically.</p><p>As an example, several fundamental properties of rotations are highly dependent on the number of dimensions involved. To help the reader who has not worked extensively with rotations build some &quot;intuition&quot; for the fact that 3D rotations are non-trivial, the following summary shows how the nice, structured properties of 2D rotations gradually disappear as the number of dimensions increase:</p><ul><li>In two dimensions, rotations are highly structured and intuitive:<ul><li>A series of 2D rotations can be applied in any order (they commute).</li><li>Any 2D rotation can be fully parametrized by a single value (the &quot;angle&quot;).
The combination of two 2D rotations can always be expressed as another single rotation (simply by taking the sum of the angles of the two rotations).</li></ul></li><li>In three dimensions rotation start to loose some structure:
<em> In 3D, rotations are no longer order-independent (they are not commutative), meaning that applying the same two rotations in different order will often yield different results.
</em> However, by <a href="https://en.wikipedia.org/wiki/Euler%27s_rotation_theorem" target="_blank" rel="noopener noreferrer">Euler&#x27;s Rotation Theorem</a>, two 3D rotations around the origin can still always be expressed as (combined into) another single 3D rotation around the origin. <!-- -->*<!-- --> Also, a 3D rotation requires not two, but a minimum of three values to be fully specified.</li><li>To give some contrast, in four and higher dimensions:<ul><li>Naturally, rotations still no longer commutative.</li><li>And worse: Euler&#x27;s Rotation Theorem no longer holds. There are now two different types of basic rotations, and the combination of two rotations will in general not result in another &quot;rotation&quot;, but another, more complex transformation.</li><li>In addition, the number of parameters (degrees of freedom) required to fully specify a rotation grows with mind-boggling rapidity, as 2^(n-1) - 1, meaning that e.g. a &quot;21 dimensional rotation&quot; would require over one million values to be fully specified!</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background-more-on-euler-angles">Background: More on Euler Angles<a href="#background-more-on-euler-angles" class="hash-link" aria-label="Direct link to Background: More on Euler Angles" title="Direct link to Background: More on Euler Angles">​</a></h2><p><a href="https://en.wikipedia.org/wiki/Euler_angles" target="_blank" rel="noopener noreferrer">Euler angle values</a></p><ul><li><strong>Axis Order</strong> - the order of rotations needs to be defined. There are 6 ways to order rotations around the three axis.</li><li><strong>Choice of Axes</strong> - &quot;Classic Euler&quot; angles follow a Z-Y-Z, convention, rotating around the same angle first and last. However, in modern applications (e.g. Aerospace and Nautical), the &quot;Tait-Brya&quot;</li><li><strong>Intrinsic or Extrinsic</strong> - One one also needs to define whether the angles are intrinsic or extrinsic.
As a comparison:</li><li>three.js <code>Euler</code> class uses intrinsic Tait-Bryan angles. &quot;Intrinsic&quot; means that rotations are performed with respect to the local coordinate system. That is, for order &#x27;XYZ&#x27;, the rotation is first around the local-X axis (which is the same as the world-X axis), then around local-Y (which may now be different from the world Y-axis), then local-Z (which may be different from the world Z-axis).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remarks">Remarks<a href="#remarks" class="hash-link" aria-label="Direct link to Remarks" title="Direct link to Remarks">​</a></h2><ul><li>In this article, the word &quot;axes&quot; represents the plural of a (coordinate) &quot;axis&quot; (normally, the word &quot;axes&quot; refers to the X, Y and Z coordinate axes).</li><li><strong>Note</strong> that one of the most efficient way to specify rotations is to use the Euler-Rodrigues parameters, which has some of the quaternion representation without requiring the introduction of quaternion algebra. math.gl does not directly support this representation though although the vector/angle can easily be converted.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/uber-web/math.gl/tree/master/website/../docs/modules/core/concepts/rotations.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/math.gl/docs/modules/core/concepts/coordinate-systems"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3D Coordinate Systems</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#properties-of-3d-rotations" class="table-of-contents__link toc-highlight">Properties of 3D Rotations</a></li><li><a href="#parametrizing-3d-rotations" class="table-of-contents__link toc-highlight">Parametrizing 3D Rotations</a><ul><li><a href="#rotation-axis-and-angle" class="table-of-contents__link toc-highlight">Rotation Axis and Angle</a></li><li><a href="#euler-angles" class="table-of-contents__link toc-highlight">Euler Angles</a></li><li><a href="#unit-quaternions" class="table-of-contents__link toc-highlight">Unit Quaternions</a></li></ul></li><li><a href="#rotation-matrices" class="table-of-contents__link toc-highlight">Rotation Matrices</a></li><li><a href="#properties-of-rotation-matrices" class="table-of-contents__link toc-highlight">Properties of Rotation Matrices</a></li><li><a href="#converting-between-rotation-representations" class="table-of-contents__link toc-highlight">Converting between Rotation Representations</a></li><li><a href="#executing-rotation-transformations" class="table-of-contents__link toc-highlight">Executing Rotation Transformations</a></li><li><a href="#rotations-using-rotation-matrices" class="table-of-contents__link toc-highlight">Rotations using Rotation Matrices</a></li><li><a href="#combining-rotations" class="table-of-contents__link toc-highlight">Combining Rotations</a></li><li><a href="#interpolating-rotations" class="table-of-contents__link toc-highlight">Interpolating Rotations</a></li><li><a href="#background-rotations-are-complicated" class="table-of-contents__link toc-highlight">Background: Rotations are Complicated</a></li><li><a href="#background-more-on-euler-angles" class="table-of-contents__link toc-highlight">Background: More on Euler Angles</a></li><li><a href="#remarks" class="table-of-contents__link toc-highlight">Remarks</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other vis.gl Libraries</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://luma.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">luma.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://loaders.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">loaders.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https:/deck.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">deck.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://nebula.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">nebula.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/deckgl/shared_invite/zt-7oeoqie8-NQqzSp5SLTFMDeNSPxi7eg" target="_blank" rel="noopener noreferrer" class="footer__link-item">deck.gl slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">vis.gl blog on Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 OpenJS Foundation</div></div></div></footer></div>
<script src="/math.gl/assets/js/runtime~main.60ec85c9.js"></script>
<script src="/math.gl/assets/js/main.ef2f5c7e.js"></script>
</body>
</html>